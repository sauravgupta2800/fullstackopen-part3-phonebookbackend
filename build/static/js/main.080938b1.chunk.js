(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),a=t(18),u=t.n(a),i=(t(9),t(8)),o=t(19),s=t(3),j=t(5),d=t.n(j),l="/api/persons",b=function(){return d.a.get(l).then((function(e){return e.data}))},h=function(e){return d.a.post(l,e).then((function(e){return e.data}))},f=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},O=t(0),v=function(e){var n=e.value,t=e.handleChange;return Object(O.jsxs)("div",{children:["Filter shown up with:",Object(O.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.message;return n?Object(O.jsxs)("div",{className:"success",children:[Object(O.jsx)("div",{children:"Success:"}),n]}):null},p=function(e){var n=e.message;return n?Object(O.jsxs)("div",{className:"error",children:[Object(O.jsx)("div",{children:"Error:"}),n]}):null},g=function(e){var n=e.text,t=e.handleClick;return Object(O.jsx)("button",{onClick:t,children:n})},w=function(e){var n=e.newName,t=e.newNumber,c=e.handleNameChange,r=e.handleNumberChange,a=e.handleSubmit;return Object(O.jsxs)("form",{onSubmit:a,children:[Object(O.jsxs)("div",{children:["name:",Object(O.jsx)("input",{value:n,onChange:c})]}),Object(O.jsxs)("div",{children:["number:",Object(O.jsx)("input",{value:t,onChange:r})]}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{type:"submit",children:"add"})})]})},C=function(e){var n=e.person,t=e.handleDelete;return Object(O.jsxs)("div",{children:[n.name,"-",n.number," ",Object(O.jsx)(g,{text:"delete",handleClick:function(){return t(n)}})]})},N=function(e){var n=e.persons,t=e.handleDelete;return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(O.jsx)(C,{person:e,handleDelete:t},e.name)}))]})},S=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),j=u[0],d=u[1],l=Object(c.useState)(""),g=Object(s.a)(l,2),C=g[0],S=g[1],k=Object(c.useState)(""),y=Object(s.a)(k,2),D=y[0],E=y[1],I=Object(c.useState)(""),T=Object(s.a)(I,2),J=T[0],L=T[1],P=Object(c.useState)(""),B=Object(s.a)(P,2),F=B[0],M=B[1];Object(c.useEffect)((function(){b().then((function(e){r(e)}))}),[]);return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Phonebook"}),Object(O.jsx)(x,{message:J}),Object(O.jsx)(p,{message:F}),Object(O.jsx)(v,{value:D,handleChange:function(e){return E(e.target.value)}}),Object(O.jsx)(w,{newName:j,newNumber:C,handleNameChange:function(e){return d(e.target.value)},handleNumberChange:function(e){return S(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=Object(o.a)(t);if(j&&C){var c=t.findIndex((function(e){return e.name===j}));-1===c?h({name:j,number:C}).then((function(e){n.push(e),r(n),d(""),S(""),L("Created"),setTimeout((function(){L("")}),3e3)})):window.confirm("".concat(j," is already existed in phonebook, replace the old number with new one?"))&&(console.log("oldPersonIdx",c),f(t[c].id,{name:j,number:C}).then((function(e){n[c]=Object(i.a)(Object(i.a)({},n[c]),e),r(n),d(""),S(""),L("Updated"),setTimeout((function(){L("")}),3e3)})))}else alert("Name or Number can not be empty")}}),Object(O.jsx)(N,{persons:D?t.filter((function(e){return e.name.toLowerCase().includes(D.toLowerCase())})):t,handleDelete:function(e){var n=e.id,c=e.name;window.confirm("Do you really want to delete ".concat(c,"?"))&&m(n).then((function(){var e=t.filter((function(e){return e.id!==n}));r(e)})).catch((function(){M("Something went wrong"),setTimeout((function(){M("")}),3e3)}))}})]})};u.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root"))},9:function(e,n,t){}},[[43,1,2]]]);
//# sourceMappingURL=main.080938b1.chunk.js.map